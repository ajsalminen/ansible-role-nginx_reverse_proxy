---
proxy_cache_valid_time: '1d'
nginx_listen:
  - 80
purge_from: 127.0.0.1 {{ansible_default_ipv4.address}}
nginx_reverse_proxy_cache_exclude: True
nginx_reverse_proxy_root: True
nginx_reverse_proxy_ssl: False
nginx_reverse_proxy_cache_options:
  - proxy_set_header Host $host;
  - proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  - proxy_hide_header x-drupal-cache-tags;

# queries (maybe), drupal cookies, or not GET methods, all require PHP processing.
nginx_reverse_proxy_exclude_cache_conditions:
  - $http_cookie ~ "DRUPAL_UID"
  - $request_method !~ ^(GET|HEAD|PURGE)$
  - $query_string ~ ".+"

nginx_reverse_proxy_upstream_host: localhost
nginx_reverse_proxy_upstream_port: 8080